<% var i, j %> <div class="panel-shadow-r"> <header class="header-aside"> <h1>__MSG_add_column__</h1> <a href="#" rel="closePanel" class="button-icon button-minimal button-xsml i-closepanel" data-panel="p1"><span></span>Close</a> </header> <div class="content scroller"> <div class="scroll-pane"> <div class="scroll-content"> <div id="accountsHolder" > <!-- Search --> <div class="acc-header-fix acc-headerSml"> <form id="searchForm" class="form-search accTrigger "> <div class="form-search-wrap"> <input id="searchInput" type="text" placeholder="__MSG_search__" class="form-search-input" /> </div> <a class="inputAction clearBtn" rel="clearForm"></a> </form> </div> <div class="acc-section"> <ul class="list-toplevel"> <li> <a href="#" rel="addSearchColumn" data-type="tweets"><span></span>__MSG_search_tweets__</a> </li> <li> <a href="#" rel="addSearchColumn" data-type="people"><span></span>__MSG_search_twitusers__</a> </li> </ul> </div> <!-- Trends --> <div  class="acc-header-fix header-locked"> <h3 id="showTrends" class="accTrigger accheader"><span class="i-trending"></span>__MSG_search_trends__</h3> </div> <div class="acc-section"> <ul class="list-toplevel"> <li> <a href="#" rel="trends" data-type="trends"><span></span>__MSG_search_trends__</a> </li> </ul> </div> <!-- Grouped Columns --> <% if(accountColumns.length > 0 ){ %> <div class="acc-header"> <h3 class="accTrigger accheader"><span class="i-multicol"></span>__MSG_combined_columns__</h3> </div> <div class="acc-section"> <ul class="list-toplevel"> <li> <a href="#" rel="addcolumn" data-service="tweetdeck" data-type="home"><span></span>__MSG_home__</a> </li> <li> <a href="#" rel="addcolumn" data-service="tweetdeck" data-type="me"><span></span>__MSG_me__</a> </li> <li> <a href="#" rel="addcolumn" data-service="tweetdeck" data-type="privateMe"><span></span>__MSG_messages__</a> </li> </ul> </div> <% }%> <% for(i = 0; i < accountColumns.length; i++) { %> <% var account = accountColumns[i].account %> <% var columnDescs = accountColumns[i].columnDescs %> <% var lists = columnDescs.lists %> <% var defaultAccount = TD.storage.store.accountStore.getDefault(); %> <% var item %> <div class="acc-header <% if(i == accountColumns.length -1){%>last<% }%>"  data-account="<%= account.type %>" data-key="<%= account.key %>"> <div class="avatar"> <img src="<%= account.profileImageURL %>" alt="accountImg"/> <span class="<%= account.type %> service">&nbsp;</span> </div> <h3 class="type-<%= account.type %> accTrigger"><%= account.username %></h3> <span class="accBtnHolder"> <a href="#" rel="setDefaultAccount" class="button-icon button-minimal button-small i-setdefaultaccount <% if(defaultAccount.key == account.key){%><%= "default" %><%}%>" data-key="<%= account.key %>"><span></span></a> <a href="#" rel="removeAccount" class="button-icon button-minimal button-small i-removeaccount"><span></span></a> </span> </div> <div class="acc-section"> <ul class="<%= account.type %> list-toplevel"> <% for(j = 0; j < columnDescs.columns.length; j++) { %> <% item = columnDescs.columns[j] %> <li> <a href="#" rel="addcolumn" action="addColumn" data-title="<%= item.columnTitle %>" data-type="<%= item.type %>" data-meta="<%= item.meta %>" data-service="<%= item.service %>"  data-key="<%= account.key %>"> <%= item.title %> <span></span> </a> </li> <% } %> </ul> <% if (account.type == "twitter") { %> <ul class="<%= account.type %> list-toplevel"> <% for(j = 0; j < Math.min(3, lists.length); j++) { %> <% item = lists[j] %> <li> <a href="#" rel="addcolumn" action="addColumn" data-title="<%= item.meta.name + " " + TD.util.i18n.getMessage("list_author", item.meta.username) %>" data-type="<%= item.type %>" data-service="<%= item.service %>" data-key="<%= account.key %>" data-meta="<%= item.title %>"> <%= item.meta.name %> <% if(item.meta.realname) {%><em><%= TD.util.i18n.getMessage("list_author", item.meta.realname) %></em><% } %> <span></span> </a> </li> <% } %> </ul> <% if (lists.length > 3) { %> <% var moreListTxt = TD.util.pluralise("__MSG_more_lists_si__", "__MSG_more_lists_pl__", lists.length - 3) %> <a href="#" class="list-show-more" rel="allLists"><%= TD.util.i18n.getMessage("more_link", [lists.length - 3, moreListTxt]) %></a> <ul class="<%= account.type %> list-toplevel hide"> <% for(j = 3; j < lists.length; j++) { %> <% item = lists[j] %> <li> <a href="#" rel="addcolumn" action="addColumn" data-title="<%= item.meta.name + " " + TD.util.i18n.getMessage("list_author", item.meta.username) %>" data-type="<%= item.type %>" data-service="<%= item.service %>" data-key="<%= account.key %>" data-meta="<%= item.title %>"> <%= item.meta.name %> <% if(item.meta.realname) {%><em><%= TD.util.i18n.getMessage("list_author", item.meta.realname) %></em><% } %> <span></span> </a> </li> <% } %> </ul> <% } %> <% } else if (account.type == "facebook") { %> <ul class="<%= account.type %> list-toplevel"> <% for(j = 0; j < columnDescs.groups.length; j++) { %> <% item = columnDescs.groups[j] %> <li> <a href="#" rel="addcolumn" action="addColumn" data-title="<%= item.title %>" data-type="<%= item.type %>" data-meta="<%= item.meta %>" data-service="<%= item.service %>"  data-key="<%= account.key %>"> <%= item.title %> <span></span> </a> </li> <% } %> <% for(j = 0; j < columnDescs.pages.length; j++) { %> <% item = columnDescs.pages[j] %> <% if (item.title) { %> <li> <a href="#" rel="addcolumn" action="addColumn" data-title="<%= item.title %>" data-type="<%= item.type %>" data-meta="<%= item.meta %>" data-service="<%= item.service %>"  data-key="<%= account.key %>"> page <%= item.title %> <span></span> </a> </li> <% } %> <% } %> <% } %> </ul> </div> <% } %> </div> <!-- End: #leftPanelAccordion --> </div> </div> </div> <!-- End: .content --> <footer> <div class="panel-buttonbar panel-skin-grad"> <a href="#" class="button-icon-label button-norm i-addaccount" rel="addAccountMenu" ><span></span>__MSG_add_account__</a> </div> </footer> </div>